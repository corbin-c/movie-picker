{"version":3,"sources":["reducers/lists.js","reducers/filters.js","reducers/movies.js","reducer.js","store.js","components/footer.js","components/grid-view/movie-trimmer/search-form.js","views/home-view.js","components/grid-view/movie-sorter.js","components/movie-poster.js","components/grid-view/poster-grid-item.js","components/grid-view/movie-grid.js","components/grid-view/movie-trimmer/double-range.js","components/grid-view/movie-trimmer/text-input.js","components/grid-view/movie-trimmer/date-selector.js","components/grid-view/movie-trimmer/list-picker.js","components/grid-view/movie-trimmer/person-selector.js","components/grid-view/movie-trimmer/movie-trimmer.js","views/grid-view.js","components/item-view/trailer.js","components/item-view/enriched-links.js","components/item-view/commercial-links.js","components/item-view/back-button.js","components/dispatch-link.js","components/item-view/movie-details/genres-links.js","components/item-view/movie-details/person-links.js","components/item-view/movie-details/movie-details.js","components/item-view/movie-details/incomplete-persons.js","views/movie-view.js","views/person-view.js","views/error-404.js","App.js","index.js"],"names":["listsReducer","state","action","type","awards","payload","genres","filtersReducer","domain","split","includes","filter","e","moviesReducer","results","map","id","property","value","body","initialState","filters","dates","start","end","parseInt","Date","getFullYear","rating","runtime","persons","p0","name","p1","sort","key","direction","plot","lists","movies","store","createStore","reset","Footer","props","target","rel","href","title","className","SearchForm","path","placeHolder","handleChanges","z","formId","resultState","useSelector","useState","searchString","setSearchString","resultsList","setResults","timer","useRef","selectResult","source","performSearch","a","length","fetch","root","json","triggerChange","useEffect","onClick","onChange","clearTimeout","current","setTimeout","onKeyDown","preventDefault","l","placeholder","tabIndex","item","i","s","HomeView","home","useParams","history","useHistory","homeView","setHomeView","page","slice","push","from","console","log","xmlns","viewBox","fillRule","d","MovieSorter","dispatch","useDispatch","view","htmlFor","MoviePoster","cover","classes","size","vw","blur","setBlur","ready","setReady","small","Image","onload","src","Object","keys","loading","alt","big","PosterItem","movie","location","useLocation","to","pathname","year","MovieGrid","filtersView","setView","setLoading","count","setCount","nextPageNeeded","setNextPageNeeded","queryBody","lastMovie","gridSection","observerRef","previousFiltersRef","previousFilters","endYear","Math","max","document","documentElement","clientWidth","window","innerWidth","handleObserver","event","isIntersecting","nextPage","fetchMovies","nextMovies","compareObjects","obj1","obj2","values1","values","values2","cleverJoin","Set","join","method","JSON","stringify","prepareFilters","date","duration","genre","stars","getCount","gridCols","breakPoints","tryToLoad","delay","classList","disconnect","IntersectionObserver","rootMargin","threshold","observer","observe","ref","DoubleRange","use","selected","renderRange","style","step","min","endValue","width","endStyle","startStyle","endPosition","startPosition","endRem","indicatorStyle","TextInput","selector","DateSelector","dateState","startYear","decades","floor","text","isDecadeSelected","decade","changeValues","ListPicker","list","fetchedList","selectElement","actionType","checked","element","replace","PersonSelector","inputs","setInputs","dispatchChanges","MovieTrimmer","onSubmit","height","GridView","setFilters","setSort","TrailerOverlay","trailer","handleChange","div","focus","youtube","frameborder","allow","allowfullscreen","imdb","autoPlay","controls","EnrichedLinks","enrichedData","getLogo","x","y","version","stroke","strokeWidth","fill","transform","points","mask","base","CommercialLinks","clipRule","gradientUnits","x2","y1","y2","offset","stopColor","x1","BackButton","icon","goBack","DispatchLink","children","GenresLinks","toLowerCase","PersonLinks","role","MovieDetails","IncompletePersons","MovieView","moviesArray","movieSelector","find","context","setContext","setTrailer","trailerState","setTrailerState","enrichedState","setEnrichedState","nextPageLoading","setnextPageLoading","setMovie","movieIndex","setMovieIndex","section","previousMovie","nextMovie","targetId","enriched","error","incomplete","fetchedMovie","findIndex","scrollTo","abstract","roles","PersonView","person","setPerson","readMore","setMore","picture","bio","limit","dot","getShortText","Error404","covers","setCovers","round","random","award","getBoundingClientRect","t","posters","left","top","medium","position","showCovers","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.265e61c8.chunk.js","sourcesContent":["const listsReducer = (state, action) => {\n  switch (action.type) {\n    case \"lists/awards\":\n      return { ...state, awards: action.payload };\n    case \"lists/genres\":\n      return { ...state, genres: action.payload };\n    default:\n      return state;\n  }\n}\nexport default listsReducer;\n","const filtersReducer = (state, action) => {\n  const domain = action.type.split(\"/\")[1];\n  const type = action.type.split(\"/\")[2];\n  if ([\"awards\",\"genres\"].includes(domain)) {\n    if (type === \"add\") {\n      return {\n        ...state,\n        [domain]: [...state[domain], action.payload]\n      }\n    } else if (type === \"remove\") {\n      return {\n        ...state,\n        [domain]: state[domain].filter(e => e !== action.payload)\n      }\n    }\n  } else if ([\"persons\",\"sort\"].includes(domain)) {\n    return {\n      ...state,\n      [domain]: { ...state[domain], [type]: action.payload }\n    }\n  }\n  if (type === \"set\") {\n    return {\n      ...state,\n      [domain]: action.payload\n    }\n  }\n  return state;\n}\n\nexport default filtersReducer;\n","const moviesReducer = (state, action) => {\n  switch (action.type) {\n    case \"movies/update\":\n      let results = state.results.map(e => {\n        if (e.id === action.payload.id) {\n          e[action.payload.property] = action.payload.value;\n        }\n        return e;\n      })\n      return {\n        ...state,\n        results\n      }\n    case \"movies/nextPage\":\n      return {\n        ...state,\n        results: [...state.results, ...action.payload]\n      }\n    case \"movies/setResults\":\n      return {\n        ...state,\n        results: action.payload\n      }\n    case \"movies/setBody\":\n      return {\n        ...state,\n        body: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default moviesReducer;\n","import listsReducer from \"./reducers/lists.js\";\nimport filtersReducer from \"./reducers/filters.js\";\nimport moviesReducer from \"./reducers/movies.js\";\n\nconst initialState = {\n  filters: {\n    dates: { start: 1900, end: parseInt((new Date()).getFullYear()) },\n    rating: { start: 0, end: 10 },\n    runtime: { start: 5, end: 240 },\n    genres: [],\n    persons: {\n      p0: {name:\"\", id:\"\"},\n      p1: {name:\"\", id:\"\"}\n    },\n    awards: [],\n    sort: {\n      key: \"\",\n      direction: \"\"\n    },\n    plot: \"\"\n  },\n  lists: {\n    awards: [],\n    genres: []\n  },\n  movies: {\n    body: {},\n    results: []\n  }\n}\n\nexport default function rootReducer(state = initialState, action) {\n  if (action.reset) {\n    state = {...state, filters: initialState.filters, movies: initialState.movies };\n  }\n  return {\n    filters: filtersReducer(state.filters,action),\n    movies: moviesReducer(state.movies, action),\n    lists: listsReducer(state.lists, action)\n  }\n}\n","import { createStore } from 'redux'\nimport rootReducer from './reducer.js'\n\nconst store = createStore(rootReducer)\n\nexport default store\n","import React from \"react\";\n\nimport \"./footer.css\";\n\nfunction Footer(props) {\n  return (\n    <footer>\n      <p>Created & developed by Clément Corbin</p>\n      <ul>\n          <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.twitter.com/clem_corbin\" title=\"Follow on Twitter\">Follow on Twitter</a></li>\n          <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.linkedin.com/in/clement-corbin/\" title=\"Connect on LinkedIn\">Connect on LinkedIn</a></li>\n          <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/corbin-c\" title=\"Code on GitHub\">Code on Github</a></li>\n      </ul>\n      <h3>Disclaimer</h3>\n      <p className=\"disclaimer\">This website exposes data from <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.imdb.com/\" title=\"IMDB website\">the Internet Movie DataBase (IMDB)</a>. All our bases are belong to them.</p>\n      <p className=\"disclaimer\">It does not intent to become a competitor of IMDB nor has commercial purpose: It only has experimental\n      and learning purpose.</p>\n      <p className=\"disclaimer\">This website basically acts like a proxy to provide a better browsing & movie discovery experience and does not store IMDB\n      or user data in any way.</p>\n      <p className=\"disclaimer\">All displayed information remains the intellectual property of IMDB or their legal owner.</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nfunction SearchForm(props) {\n  const { path, placeHolder, handleChanges, z, formId } = props;\n  const resultState = useSelector(state => {\n      try {\n        state = state.filters[formId.split(\"/\")[0]][formId.split(\"/\")[1]];\n        return state;\n      } catch {\n        return { name: \"\", id: \"\" }\n      }\n    }) || { name: \"\", id: \"\" };\n  const [searchString,setSearchString] = useState(\"\");\n  const [resultsList,setResults] = useState([]);\n  const timer = useRef(null);\n  const WAIT_INTERVAL = 1000;\n\n  const displaySearchResults = () => {\n    return resultsList.map((item,i) => {\n      return <li\n        className=\"hidden group h-8 even:bg-red-100 hover:bg-red-700 hover:text-yellow-50 text-red-900 pl-3 bg-red-200 cursor-pointer flex items-center justify-between\"\n        onClick={ () => selectResult(item.l, item.id) }\n        key={ item.id }>\n          { item.l }\n          <span className=\"hidden md:inline text-xs pr-3 text-red-700 group-hover:text-red-50\"> { item.s } </span>\n        </li>\n    });\n  }\n\n  const clearSearch = () => {\n    setSearchString(\"\");\n    setResults([]);\n    handleChanges({ name: \"\", id: \"\", source: formId });\n  }\n\n  const selectResult = (name,id) => {\n    setResults([]);\n    handleChanges({ name, id , source: formId });\n  }\n\n  const performSearch = async (searchString) => {\n    if (searchString.length > 0) {\n      let results = await fetch(path.root+searchString+path.type);\n      results = await results.json();\n      setResults(results);\n    } else {\n      setResults([]);\n    }\n  }\n\n  const inputChange = (e) => {\n    setSearchString(e.target.value);\n    clearTimeout(timer.current);\n    timer.current = setTimeout(() => {\n      triggerChange(e.target.value);\n    }, WAIT_INTERVAL);\n  }\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      clearTimeout(timer.current);\n      triggerChange(e.target.value);\n      if (resultsList.length > 0) {\n        handleChanges({\n          name:resultsList[0].l,\n          id:resultsList[0].id ,\n          source: formId\n        });\n      }\n    }\n  }\n  const triggerChange = (value) => {\n    performSearch(value);\n  }\n\n  useEffect(() => {\n    setSearchString(resultState.name);\n  }, [setSearchString,resultState.name]);\n\n  return (\n    <div className=\"relative w-full\">\n      <button\n        title=\"Clear search\"\n        className={((searchString !== \"\") ? \"flex\":\"hidden\") + \" cursor-pointer absolute top-2.5 text-2xl text-red-900 right-4 rounded-full bg-red-200 h-5 w-5 items-center justify-center\"}\n        onClick={ clearSearch }>\n      ×</button>\n      <input\n        onChange={ inputChange }\n        onKeyDown={ handleKeyDown }\n        type=\"text\"\n        value={ searchString }\n        className=\"textInput\"\n        placeholder={ placeHolder }/>\n      <ul tabIndex=\"1\" className={ ((resultsList.length === 0) ? \"empty hidden \":\"\")\n        + \"z-\" + (40+(z*10 || 0))\n        + \" bottom-0 w-auto rounded-b-lg absolute left-0 right-0 overflow-hidden mx-2 border-2 border-solid border-red-700 border-t-0\" }>\n        { displaySearchResults() }\n      </ul>\n    </div>\n  )\n}\n\nexport default SearchForm;\n","import React, { useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport SearchForm from \"../components/grid-view/movie-trimmer/search-form.js\";\nimport \"./home.css\";\n\nfunction HomeView() {\n  const { home } = useParams();\n  const history = useHistory();\n  const [homeView,setHomeView] = useState(true);\n  const handleChanges = (e) => {\n    const page = (e.id.slice(0,2) === \"tt\") ? \"/movie/\":\"/person/\";\n    history.push(page+e.id, { from: \"/\" });\n  }\n  const toGrid = (e) => {\n    console.log(\"togrid\");\n    e.preventDefault();\n    setHomeView(state => false);\n    setTimeout(() => {\n      setHomeView(state => true);\n      history.push(\"/grid/\");\n    },1300);\n  }\n  return (\n    <section id=\"home\" className={ ((typeof home !== \"undefined\") ? \"hidden \":\"flex \") + ((homeView) ? \"\":\"closing\")}>\n      <header>\n        <h1>explore</h1>\n        <h1>discover</h1>\n        <h1>pick</h1>\n      </header>\n      <div>\n        <p>Feel like you watching a movie but don't know which one?</p>\n        <p>This web app is here to help you! You can start a search below:</p>\n        <SearchForm\n          formId=\"\"\n          placeHolder=\"Citizen Kane, Orson Welles…\"\n          handleChanges={ handleChanges }\n          path={{root: \"http://localhost:8080/imdb/search/\", type: \"\" }} />\n        <p><a onClick={ toGrid } title=\"explore movies by browsing a grid view\" href=\"/grid/\">…or just explore the grid</a></p>\n      </div>\n      <footer>\n        <svg className=\"fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path fillRule=\"evenodd\" d=\"M24 5.25a.75.75 0 00-1.136-.643L16.5 8.425V6.25a1.75 1.75 0 00-1.75-1.75h-13A1.75 1.75 0 000 6.25v11C0 18.216.784 19 1.75 19h13a1.75 1.75 0 001.75-1.75v-2.175l6.364 3.818A.75.75 0 0024 18.25v-13zm-7.5 8.075l6 3.6V6.575l-6 3.6v3.15zM15 9.75v-3.5a.25.25 0 00-.25-.25h-13a.25.25 0 00-.25.25v11c0 .138.112.25.25.25h13a.25.25 0 00.25-.25v-7.5z\"></path></svg>\n        <h1>Movie Picker</h1>\n        <p>find a good movie to watch. simply.</p>\n      </footer>\n    </section>\n  );\n}\nexport default HomeView;\n//        <Link className=\"absolute right-0\" to=\"/grid/\">GRID</Link>\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport \"./movie-sorter.css\";\n\nfunction MovieSorter(props) {\n  const dispatch = useDispatch();\n  const key = useSelector(state => state.filters.sort.key) || \"moviemeter\";\n  const direction = useSelector(state => state.filters.sort.direction) || \"asc\";\n  const changeKey = (e) => {\n    dispatch({type: \"filters/sort/key\", payload: e.target.value});\n  }\n  const changeDirection = (e) => {\n    dispatch({type: \"filters/sort/direction\", payload: e.target.value});\n  }\n  const { view } = props;\n  return (\n    <fieldset\n      id=\"sorter\"\n      className={ ((view) ? \"sortVisible\":\"\") + \" z-10 bg-yellow-50 text-red-900 w-screen transform-gpu translate-y-full fixed bottom-0 lg:bottom-auto h-26 lg:h-13 pr-16 lg:top-0 left-0 flex flex-col lg:flex-row justify-around lg:justify-end items-center\" }>\n      <label className=\"lg:pr-4 text-xl lg:flex-grow lg:text-right\" htmlFor=\"sortKey\">Sort by…</label>\n      <select value={ key } id=\"sortKey\" name=\"key\" onChange={ changeKey }>\n        <option value=\"moviemeter\">popularity</option>\n        <option value=\"alpha\">alphabetical order</option>\n        <option value=\"num_votes\">number of votes</option>\n        <option value=\"boxoffice_gross_us\">US gross box-office</option>\n        <option value=\"runtime\">runtime</option>\n        <option value=\"user_rating\">user rating</option>\n        <option value=\"year\">release year</option>\n      </select>\n      <select value={ direction } name=\"direction\" onChange={ changeDirection }>\n        <option value=\"asc\">ascending</option>\n        <option value=\"desc\">descending</option>\n      </select>\n    </fieldset>\n  )\n}\n\nexport default MovieSorter\n","import React, { useState, useEffect } from \"react\";\n\n/* this displays a movie poster */\n\nfunction MoviePoster(props) {\n  const { cover, title, classes, size, vw, type } = props;\n  const [blur,setBlur] = useState(\" blur\");\n  const [ready,setReady] = useState(false);\n  useEffect(() => {\n    if (!cover) {\n      return;\n    }\n    setReady(state => false);\n    setBlur(state => \" blur\");\n    if ((size !== \"small\") && (vw > 320) && (cover.small)) {\n      let target = new Image();\n      target.onload = () => {\n        setReady(state => true);\n        setBlur(blur => \"\");\n      };\n      target.src = cover[size];\n    } else {\n      setBlur(blur => \"\");\n    }\n  },[cover, size, vw]);\n  if ((!cover) || (Object.keys(cover).length === 0)) {\n    return null;\n  }\n  if (cover.small) {\n    return (<img\n      className={ (classes || \"\") + blur }\n      src={ (ready) ? cover[size]:cover.small }\n      loading=\"lazy\"\n      alt={ ((type) ? \"Picture of \":\"Movie poster for \") + title } />\n    );\n  }\n  return (<img\n    className={ (classes || \"\") }\n    loading=\"lazy\"\n    src={ cover.big }\n    alt={ ((type) ? \"Picture of \":\"Movie poster for \")+ title } />)\n}\n\nexport default MoviePoster;\n","import React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport MoviePoster from \"../movie-poster.js\";\n\n/* this component displays a clickable movie poster */\n\nfunction PosterItem(props) {\n  const { movie, vw } = props;\n  const location = useLocation();\n  return (\n      <Link to={ { pathname:\"/movie/\" + movie.id, state: { from: location.pathname } } } title={ \"View details about this movie: \" + movie.title }>\n        <figure>\n          <MoviePoster classes=\"border-0 object-cover h-full w-full\" cover={ movie.cover } size=\"medium\" vw={ vw } title={ movie.title } />\n          <figcaption> { movie.title + ((movie.year !== \"\") ? \" (\"+ movie.year +\")\" :\"\") }</figcaption>\n        </figure>\n      </Link>\n  )\n}\n\nexport default PosterItem;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport PosterItem from \"./poster-grid-item.js\";\nimport \"./movie-grid.css\";\n\n/*\n * this component shows the movie results as a grid, based on state filters\n */\n \nfunction MovieGrid(props) {\n  const { filtersView } = props;\n\n  const [view, setView] = useState(\"closed\");\n  const [loading, setLoading] = useState(false);\n  const [count, setCount] = useState(false);\n  const [nextPageNeeded, setNextPageNeeded] = useState(false);\n  \n  const movies = useSelector(state => state.movies.results);\n  const queryBody = useSelector(state => state.movies.body);\n  const filters = useSelector(state => state.filters);\n  \n  const timer = useRef(null);\n  const lastMovie = useRef(null);\n  const gridSection = useRef(null);\n  const observerRef = useRef(null);\n  const previousFiltersRef = useRef(filters);\n  const previousFilters = previousFiltersRef.current;\n  \n  const dispatch = useDispatch();\n\n  const startYear = 1900;\n  const endYear = parseInt((new Date()).getFullYear());\n  const WAIT_INTERVAL = 1500;\n  const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n\n  const reset = (e) => {\n    e.preventDefault();\n    dispatch({type:\"\", reset: true});\n  }\n\n  const handleObserver = (event) => {\n    if (event[0].isIntersecting) {\n      setNextPageNeeded(true);\n    }\n  }\n  \n  const nextPage = async () => {\n    \n    if (movies.length === 0 || loading) {\n      return;\n    }\n    let start = movies.length+1;\n    if (start > count) {\n      if (queryBody.start === start) {\n        return;\n      }\n      queryBody.start = start;\n      setLoading(state => true);\n      let nextMovies = await fetchMovies(queryBody);\n      dispatch({ type: \"movies/setBody\", payload: queryBody });\n      dispatch({ type: \"movies/nextPage\", payload: nextMovies });\n      setLoading(state => false);\n    }\n  }\n\n  const compareObjects = (obj1, obj2) => {\n    const values1 = Object.values(obj1);\n    const values2 = Object.values(obj2);\n    if (values1.length !== values2.length) {\n      return false;\n    }\n    for (let i=0; i<values1.length; i++) {\n      if (typeof values1[i] === \"object\") {\n        let values = compareObjects(values1[i],values2[i]);\n        if (!values) {\n          return false;\n        }\n      } else if (values1[i] !== values2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  const cleverJoin = (...values) => {\n    return [...new Set([...values.filter(e => e)])].join(\",\");\n  }\n\n  const fetchMovies = async (body) => {\n    let results = await fetch(\"/imdb/movies\", {\n      method: \"POST\",\n      body: JSON.stringify(body)\n    });\n    results = await results.json();\n    return results;\n  }\n\n  const prepareFilters = (filters) => {\n    let body = {};\n    if (!(filters.dates.start === startYear && filters.dates.end === endYear)\n      && filters.dates.start !== 0) {\n      body.date = cleverJoin(filters.dates.start,filters.dates.end);\n    }\n    if (filters.plot !== \"\") {\n      body.plot = filters.plot;\n    }\n    if (!(filters.runtime.start === 5 && filters.runtime.end === 240)) {\n      body.duration = cleverJoin(filters.runtime.start,(filters.runtime.end === 240) ? 1000:filters.runtime.end);\n    }\n    if (!(filters.rating.start === 0 && filters.rating.end === 10)) {\n      body.rating = cleverJoin(filters.rating.start,filters.rating.end);\n    }\n    if (filters.genres.length > 0) {\n      body.genre = filters.genres.join(\",\");\n    }\n    if (filters.awards.length > 0) {\n      body.awards = filters.awards.join(\",\");      \n    }\n    if (filters.persons.p0.name !== \"\" || filters.persons.p1.name !== \"\") {\n      body.stars = cleverJoin(filters.persons.p0.id,filters.persons.p1.id);\n    }\n    if (filters.sort.key !== \"\" || filters.sort.direction !== \"\") {\n      let sort = [\"\",\"\"];\n      sort[0] = (filters.sort.key === \"\") ? \"popularity\":filters.sort.key;\n      sort[1] = (filters.sort.direction === \"\") ? \"asc\":filters.sort.direction;\n      body.sort = sort.join(\",\");\n    }\n    previousFiltersRef.current = filters;\n    body.count = count || getCount();\n    dispatch({ type: \"movies/setBody\", payload: body });\n    return body;\n  }\n\n  const makeGrid = () => {\n    /* handle \"no results\" -ie body not empty yet empty results\n     * & \"loading\" case - body empty or still awaiting\n     */\n    if ((Object.keys(queryBody).length > 1)\n    && (movies.length === 0)\n    && (!loading)) {\n      return (<div className=\"no-results p-5 text-yellow-50 text-3xl col-span-full row-span-full flex justify-around content-center items-center\">\n        <p>\n          Sorry, no results were found. You can <a onClick={ reset } title=\"reset all the filters\" href=\"/grid/\">reset the filters</a> or <Link to=\"/movie/random/\" title=\"random movie\">get a random movie!</Link>\n        </p>\n      </div>)\n      //no results\n    } else if ((Object.keys(queryBody).length <= 1)\n    || ((movies.length !== 0)\n      && (loading))) {\n      //loading\n    }\n    return movies.map((movie) => {\n      return (<PosterItem key={ movie.id } movie={ movie } vw={ vw } />)\n    });\n  }\n\n  const getCount = () => {\n    let gridCols = 1;\n    const breakPoints = [1536, 1280, 1024, 768, 640];\n    for (let i in breakPoints) {\n      if (vw > breakPoints[i]) {\n        gridCols = 6-i;\n        break;\n      }\n    }\n    setCount(gridCols*3);\n    return gridCols*3;\n  }\n\n  const tryToLoad = () => {\n    /* \n     * we wait for some time to avoid fetching to many times,\n     * and compare with previous filters to avoid\n     * fetching again the same data\n     */\n    const delay = (movies.length === 0) ? 0 : WAIT_INTERVAL;\n    clearTimeout(timer.current);\n    timer.current = setTimeout(async () => {\n      if (((!compareObjects(filters, previousFilters)) || (movies.length === 0))\n        && (!loading)) {\n        setLoading(state => true);\n        let movies = await fetchMovies(prepareFilters(filters));\n        dispatch({ type: \"movies/setResults\", payload: movies });\n        setLoading(state => false);\n      }\n    }, delay);\n  }\n\n  useEffect(() => {\n    if (nextPageNeeded) {\n      nextPage();\n      setNextPageNeeded(state => false);\n    }\n  });\n  \n  useEffect(() => {\n    tryToLoad();\n  },[filters]);\n\n  useEffect(() => {\n    if (filtersView) {\n      setView(state => \"opening\");\n      setTimeout(() => {\n        const opening = [...gridSection.current.classList].includes(\"opening\");\n        if (opening) {\n          setView(state => \"open\");\n        }\n      },600);\n    } else {\n      setView(state => \"closed\");\n    }\n  },[filtersView])\n  \n  useEffect(() => {\n    document.title = \"Movie Picker\";\n    tryToLoad();\n    if (observerRef.current) {\n      observerRef.current.disconnect();\n    }\n    observerRef.current = new IntersectionObserver(\n      handleObserver,\n      {\n        rootMargin: \"0px\",\n        threshold: [.0, 1.]\n      }\n    );\n    const observer = observerRef.current;\n    observer.observe(lastMovie.current);\n        \n    return () => { observer.disconnect() };\n  },[])\n  \n  return (\n    <section ref={ gridSection } className={ view + \" overflow-hidden w-screen\" }>\n      <div className=\"min-h-screen movie-grid\">\n        { makeGrid() }\n      </div>\n      <div className={ ((movies.length < count) ? \"hidden\":\"\") + \" h-1 mt-1\"} ref={ lastMovie }></div>\n    </section>\n  )\n}\n\nexport default MovieGrid;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport \"./double-range.css\";\n\n/* this component merges two input[type=range] to allow a min-max interval slider selection */\n\nfunction DoubleRange(props) {\n  const { start, end, use } = props;\n  const selected = useSelector(state => state.filters[use]);\n  const dispatch = useDispatch();\n\n  const onChange = (e) => {\n    let name = e.target.name;\n    let value = parseInt(e.target.value);\n    let state = { ...selected };\n    if (((name === \"start\") && (value <= selected.end)) || (name === \"end\")) {\n      state = { ...state, [name]: value };\n      dispatch({ type:\"filters/\" + use + \"/set\", payload: state });\n    }\n  };\n  const renderRange = (name, style) => {\n    return (\n      <input\n        type=\"range\"\n        step=\"1\"\n        style={ style }\n        className=\"appearance-none bg-red-200 h-2 z-10 absolute top-1/3\"\n        name={ name }\n        min={ (name === \"end\") ? selected.start:start }\n        max={ end }\n        value={ selected[name] }\n        onChange={ onChange }\n      />\n    );\n  }\n  /* styles for inputs: */\n  let endValue = 100 * ((end - selected.start) / (end - start));\n  let rem = 0.0125 * endValue;\n  let width = \"max(\" + endValue + \"% - \" + rem + \"rem, 1.26rem)\";\n  let endStyle = { width };\n  let startStyle = {\n    \"--zi\": (selected.start === end) ? 20:10\n  };\n  /* style for indicator */\n  let endPosition = 1-((selected.end - selected.start) / (end - selected.start));\n  let startPosition = (selected.start - start) / (end - start);\n  startPosition *= 100;\n  let startRem = .0125 * (100-startPosition);\n  let endRem = .0125 * (50-endPosition*endValue);\n  endRem += .625 * (1-endPosition)\n  let indicatorStyle = {\n    \"--indicatorLeft\": \"calc(\" + startPosition + \"% + \" + (startRem-.1) + \"rem\",\n    \"--indicatorRight\": \"calc(\"\n      + width + \" * \" + endPosition\n      + \" + \" + (endRem-.1) + \"rem)\",\n  }\n  return (\n    <fieldset className=\"flex flex-wrap md:flex-nowrap flex-row justify-evenly mb-5 md:mb-2\">\n      <span className=\"w-1/2 order-1 md:w-auto flex-grow text-left md:text-center mb-2 md:mb-0 pl-2 md:pl-0 md:pr-2\">{ selected.start }</span>\n      <div className=\"w-full order-3 md:order-2 md:w-5/6 relative ranges\" style={ indicatorStyle }>\n        { renderRange(\"start\", startStyle) }\n        { renderRange(\"end\", endStyle) }\n      </div>\n      <span className=\"w-1/2 order-2 md:order-3 md:w-auto flex-grow text-right md:text-center mb-2 md:mb-0 pr-2 md:pr-0 md:pl-2\">{ selected.end }</span>\n    </fieldset>\n  )\n}\n\nexport default DoubleRange;\n","import React, { useState, useRef, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nfunction TextInput(props) {\n  const { placeHolder, use } = props;\n  const dispatch = useDispatch();\n  const [searchString,setSearchString] = useState(\"\");\n  const selector = useSelector(state => state.filters[use]);\n  const timer = useRef(null);\n  const WAIT_INTERVAL = 1000;\n\n  const clearSearch = () => {\n    setSearchString(\"\");\n    triggerChange(\"\");\n  }\n\n  const inputChange = (e) => {\n    setSearchString(e.target.value);\n    clearTimeout(timer.current);\n    timer.current = setTimeout(() => {\n      triggerChange(e.target.value);\n    }, WAIT_INTERVAL);\n  }\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      clearTimeout(timer.current);\n      triggerChange(e.target.value);\n    }\n  }\n  const triggerChange = (value) => {\n    dispatch({type: \"filters/\" + use + \"/set\", payload: value });\n  }\n  \n  useEffect(() => {\n    setSearchString(selector);\n  }, [setSearchString,selector]);\n  \n  return (\n    <div className=\"relative\">\n      <button\n        title=\"Clear search\"\n        className={((searchString !== \"\") ? \"flex\":\"hidden\") + \" cursor-pointer absolute top-2.5 text-2xl text-red-900 right-4 rounded-full bg-red-200 h-5 w-5 items-center justify-center\"}\n        onClick={ clearSearch }>\n      ×</button>\n      <input\n        onChange={ inputChange }\n        onKeyDown={ handleKeyDown }\n        type=\"text\"\n        value={ searchString }\n        className=\"textInput\"\n        placeholder={ placeHolder }/>\n    </div>\n  )\n}\n\nexport default TextInput;\n","import React from \"react\";\nimport DoubleRange from \"./double-range.js\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\n/* this component allows the user to select date ranges for his movie \n * discovery, using a slider or by decades */\n\nfunction DateSelector() {\n  const dispatch = useDispatch();\n  const dateState = useSelector(state => state.filters.dates);\n\n  const startYear = 1900;\n  const endYear = parseInt((new Date()).getFullYear());\n\n  const decades = (() => {\n    const start = Math.floor(startYear/10)*10;\n    const end = Math.floor(endYear/10)*10;\n    let decades = [];\n    for (let i=start; i<=end; i+=10) {\n      decades.push({text: i +\"s\", key: i})\n    }\n    return decades;\n  })();\n\n  const isDecadeSelected = (start) => {\n    start = Math.max(start,startYear);\n    const end = Math.min(start+10,endYear);\n    return ((dateState.start === start) && (dateState.end === end));\n  }\n\n  const changeValues = (start) => {\n    start = Math.max(start,startYear);\n    const end = Math.min(start+10,endYear);\n    const action = {\n      type: \"filters/dates/set\",\n      payload: {start, end}\n    };\n    dispatch(action);\n  }\n  \n  const makeRadios = () => {\n    return decades.map(decade => {\n      return (<label\n        htmlFor={ decade.key }\n        className={ ((isDecadeSelected(decade.key)) ? \"selected \":\"\") + \"btn h-12 leading-10 m-1\" }\n        key={ decade.key }>\n        <input\n          onClick={ () => { changeValues(decade.key) } }\n          name=\"decades\"\n          type=\"radio\"\n          id={ decade.key }\n          value={ decade.key } />\n        { decade.text }\n      </label>)\n    });\n  }\n\n  return (\n    <section>\n      <DoubleRange\n        use=\"dates\"\n        start={ startYear }\n        end={ endYear } />\n      <fieldset\n        className=\"fieldgrid\">\n        { makeRadios() }\n      </fieldset>\n    </section>\n  );\n}\n\nexport default DateSelector;\n","import React, { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\"\n\n/* component to fetch a list & generate a checkboxes grid */\n\nfunction ListPicker(props) {\n  const { source } = props;\n  const dispatch = useDispatch();\n  const selected = useSelector(state => state.filters[source]) || [];\n  const list = useSelector(state => state.lists[source]) || [];\n\n  const listCheckBoxes = () => {\n    return list.map(element => {\n      return (<label\n        htmlFor={ element }\n        className={ ((selected.includes(element)) ? \"selected \":\"\") + \"inline-block btn h-12 leading-10 m-1 capitalize\" }\n        key={ element }>\n        <input\n          onClick={ selectElement }\n          name={ source }\n          type=\"checkbox\"\n          id={ element }\n          checked={ (selected.includes(element)) }\n          value={ element } />\n        { element.replace(/_/g, \" \").replace(\" winner\",\"\") }\n      </label>)\n    });\n  }\n\n  useEffect(() => {\n    if (list.length === 0) {\n      (async () => {\n        let fetchedList = await fetch(\"/imdb/\" + source);\n        fetchedList = await fetchedList.json();\n        dispatch({ type: \"lists/\"+source, payload: fetchedList });\n      })();\n    }\n  },[list.length, source, dispatch]);\n\n  const selectElement = (e) => {\n    const key = e.target.value;\n    const actionType = (e.target.checked) ? \"add\":\"remove\";\n    const action = {\n      type: \"filters/\"+source+\"/\"+actionType,\n      payload: key\n    };\n    dispatch(action);\n  };\n\n  return (<fieldset className=\"fieldgrid\">\n      { listCheckBoxes() }\n    </fieldset>)\n}\n\nexport default ListPicker;\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport SearchForm from \"./search-form.js\";\n\n// displays a search form for person lookup, allows to add another form for cross-searches\n\nfunction PersonSelector() {\n  const [inputs, setInputs] = useState(1);\n  const dispatch = useDispatch();\n\n  const dispatchChanges = (state) => {\n    let { source, name, id } = state;\n    if (typeof name === \"undefined\") {\n      name = \"\";\n    }\n    if (typeof id === \"undefined\") {\n      id = \"\";\n    }\n    let action = {type: \"filters/\"+source, payload: {name, id}};\n    dispatch(action);\n  }\n\n  const removePerson = () => {\n    setInputs(1);\n    dispatchChanges({source: \"persons/p1\"})\n  }\n\n  return (<fieldset>\n  <div className=\"flex items-center mb-2\">\n    <SearchForm\n      z=\"1\"\n      formId=\"persons/p0\"\n      placeHolder=\"John Doe\"\n      handleChanges={ dispatchChanges }\n      path={{root: \"/imdb/search/\", type: \"/names\" }} />\n    <button\n      onClick={ () => setInputs(2) }\n      title=\"Add another person\"\n      className={((inputs === 1) ? \" \":\"invisible \") + \"flex cursor-pointer text-2xl mx-2 text-green-800 rounded-full bg-green-200 h-5 w-5 items-center justify-center\"}\n      >\n    +</button>\n  </div>\n  {( inputs === 2 ) &&\n  <div className=\"flex items-center\">\n    <SearchForm\n      formId=\"persons/p1\"\n      placeHolder=\"Erika Mustermann\"\n      handleChanges={ dispatchChanges }\n      path={{root: \"/imdb/search/\", type: \"/names\" }} />\n    <button\n      onClick={ removePerson }\n      title=\"Remove this person\"\n      className=\"flex cursor-pointer text-2xl mx-2 text-red-900 rounded-full bg-red-200 h-5 w-5 items-center justify-center\"\n      >\n    ×</button>\n  </div>}\n  </fieldset>);\n}\nexport default PersonSelector;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\n\nimport DoubleRange from \"./double-range.js\";\nimport TextInput from \"./text-input.js\";\nimport DateSelector from \"./date-selector.js\";\nimport ListPicker from \"./list-picker.js\";\nimport PersonSelector from \"./person-selector.js\";\nimport \"./movie-trimmer.css\";\n\n/*\n * this component exposes various controls to narrow the search (dates, roles, awards, etc.)\n */\n \nfunction MovieTrimmer(props) {\n  const { view } = props;\n  const dispatch = useDispatch();\n  const resetFilters = () => {\n    dispatch({type:\"\", reset: true});\n  }\n  return (\n    <section id=\"filters\" className={ ((view) ? \"filtersVisible\":\"\") + \" flex flex-col justify-between\"}>\n      <h1 className=\"text-center text-3xl font-bold text-red-900 mt-2 mb-4\">Filter movies by…</h1>\n      <form className=\"flex-grow\" onSubmit={ (e) => e.preventDefault() }>\n        <details>\n          <summary>Years</summary>\n          <DateSelector />\n        </details>\n        <details>\n          <summary>Genres</summary>\n          <ListPicker source=\"genres\" />\n        </details>\n        <details>\n          <summary>Persons</summary>\n          <PersonSelector />\n        </details>\n        <details>\n          <summary>Awards</summary>\n          <ListPicker source=\"awards\" />\n        </details>\n        <details>\n          <summary>User rating</summary>\n          <DoubleRange use=\"rating\" start={0} end={10} />\n        </details>\n        <details>\n          <summary>Runtime</summary>\n          <DoubleRange use=\"runtime\" start={5} end={240} />\n        </details>\n        <details>\n          <summary>Plot</summary>\n          <TextInput use=\"plot\" placeHolder=\"zombies\" />\n        </details>\n        \n      </form>\n      <button onClick={ resetFilters } className=\"btn-icon absolute top-2 left-2 lg:left-14\" title=\"Clear all filters\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M3.38 8A9.502 9.502 0 0112 2.5a9.502 9.502 0 019.215 7.182.75.75 0 101.456-.364C21.473 4.539 17.15 1 12 1a10.995 10.995 0 00-9.5 5.452V4.75a.75.75 0 00-1.5 0V8.5a1 1 0 001 1h3.75a.75.75 0 000-1.5H3.38zm-.595 6.318a.75.75 0 00-1.455.364C2.527 19.461 6.85 23 12 23c4.052 0 7.592-2.191 9.5-5.451v1.701a.75.75 0 001.5 0V15.5a1 1 0 00-1-1h-3.75a.75.75 0 000 1.5h2.37A9.502 9.502 0 0112 21.5c-4.446 0-8.181-3.055-9.215-7.182z\"></path></svg>\n      </button> \n      <h2 className=\"text-center text-xl font-bold text-red-900 mt-2 pb-4\">\n        <Link to=\"/movie/random\" title=\"Get a random movie\">\n          …or get a random movie?\n        </Link>\n      </h2>\n    </section>\n  )\n}\n\nexport default MovieTrimmer;\n","import React, { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport MovieSorter from \"../components/grid-view/movie-sorter.js\";\nimport MovieGrid from \"../components/grid-view/movie-grid.js\";\nimport MovieTrimmer from \"../components/grid-view/movie-trimmer/movie-trimmer.js\";\n\nfunction GridView() {\n  const { home } = useParams();\n  const [filters, setFilters] = useState(false);\n  const [sort, setSort] = useState(false);\n  const toggleFiltersView = () => {\n    setFilters(state => !filters);\n  }\n  const toggleSortView = () => {\n    setSort(state => !sort);\n  }\n  return (\n    <div className=\"grid-view\">\n      <button onClick={ toggleFiltersView }\n        title={ (filters ? \"Close\":\"Open\") + \" filter panel\"}\n        className={ ((typeof home === \"undefined\") ? \"hidden \":\"\") + \"btn-icon fixed bottom-2 lg:bottom-auto lg:right-auto right-2 lg:top-2 lg:left-2 z-40\"}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n          <path fillRule=\"evenodd\" d=\"M16 12a4 4 0 11-8 0 4 4 0 018 0zm-1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\"></path><path fillRule=\"evenodd\" d=\"M12 1c-.268 0-.534.01-.797.028-.763.055-1.345.617-1.512 1.304l-.352 1.45c-.02.078-.09.172-.225.22a8.45 8.45 0 00-.728.303c-.13.06-.246.044-.315.002l-1.274-.776c-.604-.368-1.412-.354-1.99.147-.403.348-.78.726-1.129 1.128-.5.579-.515 1.387-.147 1.99l.776 1.275c.042.069.059.185-.002.315-.112.237-.213.48-.302.728-.05.135-.143.206-.221.225l-1.45.352c-.687.167-1.249.749-1.304 1.512a11.149 11.149 0 000 1.594c.055.763.617 1.345 1.304 1.512l1.45.352c.078.02.172.09.22.225.09.248.191.491.303.729.06.129.044.245.002.314l-.776 1.274c-.368.604-.354 1.412.147 1.99.348.403.726.78 1.128 1.129.579.5 1.387.515 1.99.147l1.275-.776c.069-.042.185-.059.315.002.237.112.48.213.728.302.135.05.206.143.225.221l.352 1.45c.167.687.749 1.249 1.512 1.303a11.125 11.125 0 001.594 0c.763-.054 1.345-.616 1.512-1.303l.352-1.45c.02-.078.09-.172.225-.22.248-.09.491-.191.729-.303.129-.06.245-.044.314-.002l1.274.776c.604.368 1.412.354 1.99-.147.403-.348.78-.726 1.129-1.128.5-.579.515-1.387.147-1.99l-.776-1.275c-.042-.069-.059-.185.002-.315.112-.237.213-.48.302-.728.05-.135.143-.206.221-.225l1.45-.352c.687-.167 1.249-.749 1.303-1.512a11.125 11.125 0 000-1.594c-.054-.763-.616-1.345-1.303-1.512l-1.45-.352c-.078-.02-.172-.09-.22-.225a8.469 8.469 0 00-.303-.728c-.06-.13-.044-.246-.002-.315l.776-1.274c.368-.604.354-1.412-.147-1.99-.348-.403-.726-.78-1.128-1.129-.579-.5-1.387-.515-1.99-.147l-1.275.776c-.069.042-.185.059-.315-.002a8.465 8.465 0 00-.728-.302c-.135-.05-.206-.143-.225-.221l-.352-1.45c-.167-.687-.749-1.249-1.512-1.304A11.149 11.149 0 0012 1zm-.69 1.525a9.648 9.648 0 011.38 0c.055.004.135.05.162.16l.351 1.45c.153.628.626 1.08 1.173 1.278.205.074.405.157.6.249a1.832 1.832 0 001.733-.074l1.275-.776c.097-.06.186-.036.228 0 .348.302.674.628.976.976.036.042.06.13 0 .228l-.776 1.274a1.832 1.832 0 00-.074 1.734c.092.195.175.395.248.6.198.547.652 1.02 1.278 1.172l1.45.353c.111.026.157.106.161.161a9.653 9.653 0 010 1.38c-.004.055-.05.135-.16.162l-1.45.351a1.833 1.833 0 00-1.278 1.173 6.926 6.926 0 01-.25.6 1.832 1.832 0 00.075 1.733l.776 1.275c.06.097.036.186 0 .228a9.555 9.555 0 01-.976.976c-.042.036-.13.06-.228 0l-1.275-.776a1.832 1.832 0 00-1.733-.074 6.926 6.926 0 01-.6.248 1.833 1.833 0 00-1.172 1.278l-.353 1.45c-.026.111-.106.157-.161.161a9.653 9.653 0 01-1.38 0c-.055-.004-.135-.05-.162-.16l-.351-1.45a1.833 1.833 0 00-1.173-1.278 6.928 6.928 0 01-.6-.25 1.832 1.832 0 00-1.734.075l-1.274.776c-.097.06-.186.036-.228 0a9.56 9.56 0 01-.976-.976c-.036-.042-.06-.13 0-.228l.776-1.275a1.832 1.832 0 00.074-1.733 6.948 6.948 0 01-.249-.6 1.833 1.833 0 00-1.277-1.172l-1.45-.353c-.111-.026-.157-.106-.161-.161a9.648 9.648 0 010-1.38c.004-.055.05-.135.16-.162l1.45-.351a1.833 1.833 0 001.278-1.173 6.95 6.95 0 01.249-.6 1.832 1.832 0 00-.074-1.734l-.776-1.274c-.06-.097-.036-.186 0-.228.302-.348.628-.674.976-.976.042-.036.13-.06.228 0l1.274.776a1.832 1.832 0 001.734.074 6.95 6.95 0 01.6-.249 1.833 1.833 0 001.172-1.277l.353-1.45c.026-.111.106-.157.161-.161z\"></path>\n        </svg>\n      </button>\n      <button onClick={ toggleSortView }\n        title={ (sort ? \"Close\":\"Open\") + \" sort panel\"}\n        className={ ((typeof home === \"undefined\") ? \"hidden \":\"\") + \"btn-icon fixed bottom-15 lg:bottom-auto lg:top-2 right-2 ml-full transform rotate-90 scale-x-x z-20\"}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n          <path d=\"M7.72 21.78a.75.75 0 001.06-1.06L5.56 17.5h14.69a.75.75 0 000-1.5H5.56l3.22-3.22a.75.75 0 10-1.06-1.06l-4.5 4.5a.75.75 0 000 1.06l4.5 4.5zm8.56-9.5a.75.75 0 11-1.06-1.06L18.44 8H3.75a.75.75 0 010-1.5h14.69l-3.22-3.22a.75.75 0 011.06-1.06l4.5 4.5a.75.75 0 010 1.06l-4.5 4.5z\"></path>\n        </svg>\n      </button>\n      <MovieSorter view={ sort } />\n      <MovieTrimmer view={ filters } />\n      <MovieGrid filtersView={ filters } />\n    </div>\n  );\n}\nexport default GridView;\n","import React, { useEffect, useRef } from \"react\";\n\nfunction TrailerOverlay(props) {\n  const { title, trailer, handleChange, classes } = props;\n  const div = useRef(null);\n  const tryToExit = (event) => {\n    if (event.key === \"Escape\") {\n      handleChange();\n    }\n  }\n  useEffect(() => {\n    if (classes === \"\") {\n      div.current.focus();\n    }\n  },[trailer, classes]);\n  return (\n    <div ref={ div } onKeyDown={ tryToExit } tabIndex=\"1\" className={ classes + \"trailer fixed top-0 left-0 w-screen h-screen bg-opacity-80 bg-black flex justify-center items-center\"}>\n      <button title=\"Close trailer\" className=\"btn-icon absolute top-2 right-2\" onClick={ handleChange }>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fillRule=\"evenodd\" d=\"M5.72 5.72a.75.75 0 011.06 0L12 10.94l5.22-5.22a.75.75 0 111.06 1.06L13.06 12l5.22 5.22a.75.75 0 11-1.06 1.06L12 13.06l-5.22 5.22a.75.75 0 01-1.06-1.06L10.94 12 5.72 6.78a.75.75 0 010-1.06z\"></path></svg>\n      </button>\n      { ((trailer) && (trailer.youtube) && (classes === \"\"))\n      && <div className=\"relative video-container\">\n          <iframe\n            className=\"w-full h-full absolute top-0 left-0\"\n            width=\"560\"\n            height=\"315\"\n            src={ \"https://www.youtube-nocookie.com/embed/\" + trailer.youtube + \"?autoplay=1&modestbranding=1&disablekb=1&controls=0&showinfo=0\" }\n            title={ title + \"trailer\" }\n            frameborder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowfullscreen>\n          </iframe>\n        </div> }\n      { ((trailer) && (trailer.imdb) && (classes === \"\"))\n      && <video src={ trailer.imdb } autoPlay={ true } controls={ true }></video> }\n    </div>\n  );\n}\n\nexport default TrailerOverlay;\n","import React from \"react\";\n\nfunction EnrichedLinks(props) {\n  const { title, name, enrichedData } = props;\n  const getLogo = (key) => {\n    switch (key) {\n      case \"wiki\":\n        return (<svg className=\"fill-current\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"20\" height=\"20\" viewBox=\"0 0 98.05 98.05\"><path d=\"M98.023,17.465l-19.584-0.056c-0.004,0.711-0.006,1.563-0.017,2.121c1.664,0.039,5.922,0.822,7.257,4.327L66.92,67.155   c-0.919-2.149-9.643-21.528-10.639-24.02l9.072-18.818c1.873-2.863,5.455-4.709,8.918-4.843l-0.01-1.968L55.42,17.489   c-0.045,0.499,0.001,1.548-0.068,2.069c5.315,0.144,7.215,1.334,5.941,4.508c-2.102,4.776-6.51,13.824-7.372,15.475   c-2.696-5.635-4.41-9.972-7.345-16.064c-1.266-2.823,1.529-3.922,4.485-4.004v-1.981l-21.82-0.067   c0.016,0.93-0.021,1.451-0.021,2.131c3.041,0.046,6.988,0.371,8.562,3.019c2.087,4.063,9.044,20.194,11.149,24.514   c-2.685,5.153-9.207,17.341-11.544,21.913c-3.348-7.43-15.732-36.689-19.232-44.241c-1.304-3.218,3.732-5.077,6.646-5.213   l0.019-2.148L0,17.398c0.005,0.646,0.027,1.71,0.029,2.187c4.025-0.037,9.908,6.573,11.588,10.683   c7.244,16.811,14.719,33.524,21.928,50.349c0.002,0.029,2.256,0.059,2.281,0.008c4.717-9.653,10.229-19.797,15.206-29.56   L63.588,80.64c0.005,0.004,2.082,0.016,2.093,0.007c7.962-18.196,19.892-46.118,23.794-54.933c1.588-3.767,4.245-6.064,8.543-6.194   l0.032-1.956L98.023,17.465z\"/></svg>)\n      case \"rotten\":\n        return (<svg width=\"20px\" height=\"20px\" viewBox=\"0 0 80 80\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"> <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\"> <g transform=\"translate(1.327801, 0.000000)\"> <g transform=\"translate(0.000000, 16.265560)\"> <mask id=\"mask-2\" fill=\"white\"> <polygon id=\"path-1\" points=\"0.000109100102 0.246970954 77.0827837 0.246970954 77.0827837 63.7145228 0.000109100102 63.7145228\"/> </mask> <path d=\"M77.0137759,27.0426556 C76.2423237,14.6741909 69.9521992,5.42041494 60.4876349,0.246970954 C60.5414108,0.548381743 60.273195,0.925145228 59.9678008,0.791701245 C53.7772614,-1.91634855 43.2753527,6.84780083 35.9365975,2.25825726 C35.9917012,3.90539419 35.6700415,11.940249 24.3515353,12.4063071 C24.0843154,12.4172614 23.9372614,12.1443983 24.1062241,11.9512033 C25.619917,10.2247303 27.1482158,5.85360996 24.9507054,3.5233195 C20.2446473,7.74041494 17.5117012,9.32746888 8.48829876,7.23319502 C2.71103734,13.2740249 -0.562655602,21.5419087 0.08,31.8413278 C1.39120332,52.86639 21.0848133,64.8846473 40.9165145,63.6471369 C60.746888,62.4106224 78.3253112,48.0677178 77.0137759,27.0426556\" id=\"Fill-1\" fill=\"#FA320A\" mask=\"url(#mask-2)\"/> </g> <path d=\"M40.8717012,11.4648963 C44.946722,10.49361 56.6678838,11.3702905 60.4232365,16.3518672 C60.6486307,16.6506224 60.3312863,17.2159336 59.9678008,17.0572614 C53.7772614,14.3492116 43.2753527,23.113361 35.9365975,18.5238174 C35.9917012,20.1709544 35.6700415,28.2058091 24.3515353,28.6718672 C24.0843154,28.6828216 23.9372614,28.4099585 24.1062241,28.2167635 C25.619917,26.4902905 27.1478838,22.1191701 24.9507054,19.7888797 C19.8243983,24.3827386 17.0453112,25.8589212 5.91900415,22.8514523 C5.55485477,22.753195 5.67900415,22.1679668 6.06639004,22.020249 C8.16929461,21.2165975 12.933444,17.6965975 17.4406639,16.1450622 C18.2987552,15.8499585 19.1541909,15.6209129 19.9890456,15.4878008 C15.02639,15.0443154 12.7893776,14.3541909 9.63286307,14.8302075 C9.28697095,14.8823237 9.05195021,14.479668 9.26639004,14.2034855 C13.5193361,8.7253112 21.3540249,7.07087137 26.1878838,9.98107884 C23.2082988,6.28912863 20.8743568,3.34473029 20.8743568,3.34473029 L26.4046473,0.203485477 C26.4046473,0.203485477 28.6894606,5.30821577 30.3518672,9.02340249 C34.4657261,2.94506224 42.119834,2.38406639 45.3536929,6.69676349 C45.5455602,6.95302905 45.3450622,7.31751037 45.0247303,7.30987552 C42.3926971,7.24580913 40.9434025,9.63983402 40.833527,11.4605809 L40.8717012,11.4648963\" id=\"Fill-4\" fill=\"#00912D\"/> </g> </g></svg>);\n      case \"meta\":\n        return (<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 29.4 29.7\" width=\"20\" height=\"20\"><g><path fill=\"#FFCC34\" d=\"M29.4,14.8c0,8.2-6.7,14.9-14.9,14.9S-0.3,23-0.3,14.8C-0.3,6.7,6.3,0,14.5,0S29.4,6.7,29.4,14.8\"/><path fill=\"#333333\" d=\"M26.5,14.8c0,6.6-5.3,11.9-11.9,11.9S2.7,21.4,2.7,14.8S8,2.9,14.6,2.9   C21.1,2.9,26.5,8.2,26.5,14.8\"/><path fill=\"#FEFEFE\" d=\"M6.8,18.9c-1-1-1.9-1.9-2.7-2.6l2.2-2.2l1.2,1L7.6,15c-0.2-0.8-0.3-2.3,1.1-3.7   c1.1-1.1,2.5-1.4,3.7-0.8l0,0c-0.1-0.8-0.1-1.5,0.1-2.1c0.2-0.7,0.6-1.4,1.2-2c1.6-1.6,3.9-1.7,6.4,0.8l4.9,4.9l-2.5,2.5L18,10.1   c-1.2-1.2-2.3-1.5-3.1-0.7c-0.6,0.6-0.6,1.4-0.3,2.1c0.1,0.2,0.4,0.5,0.6,0.7l4.9,4.9l-2.5,2.5L13,15c-1-1-2.1-1.4-3-0.5   c-0.7,0.7-0.5,1.6-0.3,2.1c0.1,0.3,0.3,0.5,0.6,0.8l4.8,4.8l-2.5,2.5L6.8,18.9z\"/></g><g><path fill=\"white\" d=\"M34.8,13.2c0-1.3,0-2.5-0.1-3.4h2.8l0.1,1.5h0.1c0.5-0.7,1.4-1.7,3.2-1.7c1.4,0,2.5,0.7,2.9,1.8   l0,0c0.4-0.6,0.9-1,1.4-1.3c0.6-0.3,1.3-0.5,2-0.5c2.1,0,3.6,1.4,3.6,4.7v6.3h-3.2v-5.9c0-1.6-0.5-2.5-1.6-2.5   c-0.8,0-1.3,0.5-1.6,1.2c-0.1,0.2-0.1,0.6-0.1,0.8v6.3h-3.2v-6c0-1.3-0.5-2.3-1.6-2.3c-0.9,0-1.4,0.7-1.6,1.2   c-0.1,0.3-0.1,0.6-0.1,0.9v6.2h-3.2v-7.3H34.8z\"/><path fill=\"white\" d=\"M60.2,13.9c0-0.8-0.4-2.2-1.9-2.2c-1.4,0-2,1.3-2.1,2.2H60.2z M56.3,16.2c0.1,1.4,1.5,2.1,3,2.1   c1.1,0,2.1-0.2,3-0.5l0.4,2.3c-1.1,0.5-2.4,0.7-3.9,0.7c-3.6,0-5.7-2.1-5.7-5.5c0-2.7,1.7-5.7,5.4-5.7c3.5,0,4.8,2.7,4.8,5.4   c0,0.6-0.1,1.1-0.1,1.3L56.3,16.2z\"/><path fill=\"white\" d=\"M69,6.9v2.9h2.4v2.5H69v3.9c0,1.3,0.3,1.9,1.3,1.9c0.5,0,0.7,0,1-0.1v2.5   c-0.4,0.2-1.2,0.3-2.2,0.3c-1.1,0-2-0.4-2.5-0.9c-0.6-0.7-0.9-1.7-0.9-3.2v-4.4h-1.4V9.8h1.4v-2L69,6.9z\"/><path fill=\"white\" d=\"M79,15.5c-1.8,0-3.1,0.4-3.1,1.7c0,0.9,0.6,1.3,1.3,1.3c0.8,0,1.5-0.5,1.7-1.2   c0-0.2,0.1-0.4,0.1-0.6V15.5z M82.3,18c0,1,0,2,0.2,2.6h-3l-0.2-1.1h-0.1c-0.7,0.9-1.8,1.3-3.1,1.3c-2.2,0-3.5-1.6-3.5-3.3   c0-2.8,2.5-4.1,6.3-4.1v-0.1c0-0.6-0.3-1.4-2-1.4c-1.1,0-2.3,0.4-3,0.8l-0.6-2.1c0.7-0.4,2.2-1,4.2-1c3.6,0,4.7,2.1,4.7,4.6   L82.3,18L82.3,18z\"/><path fill=\"white\" d=\"M93,20.3c-0.6,0.3-1.7,0.5-3,0.5c-3.5,0-5.7-2.1-5.7-5.5c0-3.1,2.2-5.7,6.1-5.7   c0.9,0,1.8,0.2,2.5,0.4l-0.5,2.5c-0.4-0.2-1-0.3-1.9-0.3c-1.8,0-2.9,1.3-2.9,3c0,2,1.3,3,2.9,3c0.8,0,1.4-0.1,1.9-0.4L93,20.3z\"/><path fill=\"white\" d=\"M94.8,13.3c0-1.6,0-2.6-0.1-3.5h2.9l0.1,2h0.1c0.5-1.6,1.8-2.2,2.9-2.2c0.3,0,0.5,0,0.7,0.1v3.1   c-0.3,0-0.5-0.1-0.9-0.1c-1.2,0-2.1,0.6-2.3,1.7c0,0.2-0.1,0.5-0.1,0.7v5.4h-3.3C94.8,20.5,94.8,13.3,94.8,13.3z\"/><path fill=\"white\" d=\"M103.1,20.5h3.3V9.8h-3.3V20.5z M104.8,8.4c-1.1,0-1.8-0.8-1.8-1.8s0.7-1.8,1.9-1.8   c1.1,0,1.8,0.8,1.9,1.8C106.7,7.6,105.9,8.4,104.8,8.4L104.8,8.4z\"/><path fill=\"white\" d=\"M112.9,6.9v2.9h2.4v2.5h-2.4v3.9c0,1.3,0.3,1.9,1.3,1.9c0.5,0,0.7,0,1-0.1v2.5   c-0.4,0.2-1.2,0.3-2.2,0.3c-1.1,0-2-0.4-2.5-0.9c-0.6-0.6-0.9-1.7-0.9-3.2v-4.4h-1.4V9.8h1.4v-2L112.9,6.9z\"/><path fill=\"white\" d=\"M117.2,20.5h3.3V9.8h-3.3V20.5z M118.8,8.4c-1.1,0-1.8-0.8-1.8-1.8s0.7-1.8,1.9-1.8   c1.1,0,1.8,0.8,1.9,1.8C120.7,7.6,120,8.4,118.8,8.4L118.8,8.4z\"/><path fill=\"white\" d=\"M131.2,20.3c-0.6,0.3-1.7,0.5-3,0.5c-3.5,0-5.7-2.1-5.7-5.5c0-3.1,2.2-5.7,6.1-5.7   c0.9,0,1.8,0.2,2.5,0.4l-0.5,2.5c-0.4-0.2-1-0.3-1.9-0.3c-1.8,0-2.9,1.3-2.9,3c0,2,1.3,3,2.9,3c0.8,0,1.4-0.1,1.9-0.4L131.2,20.3z\"/></g></svg>);\n      default:\n        return null;\n    }\n  }\n  const keys = {\n   \"wiki\": {\n     \"base\":\"https://en.wikipedia.org/wiki/\",\n     \"name\":\"Wikipedia\"\n   },\n   \"rotten\": {\n     \"base\":\"https://www.rottentomatoes.com/\",\n     \"name\":\"Rotten Tomatoes\"\n   },\n   \"meta\": {\n     \"base\":\"https://www.metacritic.com/\",\n     \"name\":\"Metacritic\"\n   }\n  }\n  return (enrichedData)\n    ? Object.keys(enrichedData).filter(e => typeof keys[e] !== \"undefined\").map(e => {\n        return (\n          <a className={ e } key={ e } href={ keys[e].base+enrichedData[e] } target=\"_blank\" rel=\"noopener noreferrer\" title={ \"Search for \" + (title || name) + \" on \" + keys[e].name }>\n            { getLogo(e) } { keys[e].name }\n          </a>\n        )\n      })\n    : null;\n}\n\nexport default EnrichedLinks\n","import React from \"react\";\n\nfunction CommercialLinks(props) {\n  const { title } = props;\n  const getLogo = (key) => {\n    switch (key) {\n      case \"amazon\":\n        return (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 1100 1000\">\n                  <path fill=\"#f79400\" d=\"M2 776c3.333-5.333 8.666-5.667 16-1 166.666 96.667 348 145 544 145 130.666 0 259.666-24.333 387-73 3.333-1.333 8.166-3.333 14.5-6 6.333-2.667 10.833-4.667 13.5-6 10-4 17.833-2 23.5 6 5.666 8 3.833 15.333-5.5 22-12 8.667-27.334 18.667-46 30-57.334 34-121.334 60.333-192 79-70.667 18.667-139.667 28-207 28-104 0-202.334-18.167-295-54.5C162.333 909.167 79.333 858 6 792c-4-3.333-6-6.667-6-10 0-2 .666-4 2-6zm301-285c0-46 11.333-85.333 34-118 22.666-32.667 53.666-57.333 93-74 36-15.333 80.333-26.333 133-33 18-2 47.333-4.667 88-8v-17c0-42.667-4.667-71.333-14-86-14-20-36-30-66-30h-8c-22 2-41 9-57 21s-26.334 28.667-31 50c-2.667 13.333-9.334 21-20 23l-115-14c-11.334-2.667-17-8.667-17-18 0-2 .333-4.333 1-7 11.333-59.333 39.166-103.333 83.5-132C451.833 19.333 503.666 3.333 563 0h25c76 0 135.333 19.667 178 59a190.52 190.52 0 0 1 18.5 21.5c5.666 7.667 10.166 14.5 13.5 20.5 3.333 6 6.333 14.667 9 26 2.666 11.333 4.666 19.167 6 23.5 1.333 4.333 2.333 13.667 3 28 .666 14.333 1 22.833 1 25.5v242c0 17.333 2.5 33.167 7.5 47.5s9.833 24.667 14.5 31c4.666 6.333 12.333 16.5 23 30.5 4 6 6 11.333 6 16 0 5.333-2.667 10-8 14-55.334 48-85.334 74-90 78-8 6-17.667 6.667-29 2-9.334-8-17.5-15.667-24.5-23s-12-12.667-15-16-7.834-9.833-14.5-19.5c-6.667-9.667-11.334-16.167-14-19.5-37.334 40.667-74 66-110 76-22.667 6.667-50.667 10-84 10-51.334 0-93.5-15.833-126.5-47.5S303 549 303 491zm172-20c0 26 6.5 46.833 19.5 62.5S525 557 547 557c2 0 4.833-.333 8.5-1 3.666-.667 6.166-1 7.5-1 28-7.333 49.666-25.333 65-54 7.333-12.667 12.833-26.5 16.5-41.5 3.666-15 5.666-27.167 6-36.5.333-9.333.5-24.667.5-46v-25c-38.667 0-68 2.667-88 8-58.667 16.667-88 53.667-88 111zm420 322c1.333-2.667 3.333-5.333 6-8 16.666-11.333 32.666-19 48-23 25.333-6.667 50-10.333 74-11 6.666-.667 13-.333 19 1 30 2.667 48 7.667 54 15 2.666 4 4 10 4 18v7c0 23.333-6.334 50.833-19 82.5-12.667 31.667-30.334 57.167-53 76.5-3.334 2.667-6.334 4-9 4-1.334 0-2.667-.333-4-1-4-2-5-5.667-3-11 24.666-58 37-98.333 37-121 0-7.333-1.334-12.667-4-16-6.667-8-25.334-12-56-12-11.334 0-24.667.667-40 2-16.667 2-32 4-46 6-4 0-6.667-.667-8-2-1.334-1.333-1.667-2.667-1-4 0-.667.333-1.667 1-3z\"/>\n                </svg>)\n      case \"netflix\":\n        return (<svg width=\"20\" height=\"20\" viewBox=\"66.827 90.186 451.865 819.903\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <g clipRule=\"evenodd\" fillRule=\"evenodd\">\n                    <path d=\"m66.827 90.294v409.464c0 225.219.214 409.683.539 410.007.324.324 14.239-1.076 31.067-2.912 16.828-1.833 40.019-4.203 51.562-5.175 17.69-1.509 70.762-4.85 76.804-4.958 1.833 0 1.94-9.163 2.157-173.468l.322-173.062-.106-.299v.216z\" fill=\"#b1060f\"/><path d=\"m66.827 90.294 162.265 553.358.184-93.461-.106-.298v.215z\" fill=\"#9d030f\"/><path d=\"m357.535 90.834-.324 181.122-.323 181.016 160.94 456.686c-.092.092-.518.139-1.213.148.804 0 1.302-.047 1.429-.148.54-.433.648-184.789.54-409.792l-.324-409.032z\" fill=\"#b1060f\"/><path d=\"m356.888 452.972 154.06 437.165-153.889-528.716z\" fill=\"#9d030f\"/><path d=\"m66.827 90.294 162.343 459.814v-.216l12.837 36.226c71.302 201.714 109.595 309.955 109.811 310.171.108.107 10.896.756 23.946 1.4 39.481 1.94 88.452 6.146 125.669 10.78 8.521 1.08 15.964 1.62 16.396 1.188l-160.94-456.688v.108l-14.889-42.044c-14.563-41.077-24.27-68.569-82.843-233.951-15.748-44.526-29.125-82.152-29.663-83.877l-1.08-3.019h-80.794z\" fill=\"#e50914\"/>\n                  </g>\n                </svg>);\n      case \"googleplay\":\n        return (<svg height=\"20\" viewBox=\"0 -0.5 408 467.80000000000007\" width=\"20\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <linearGradient id=\"a\" gradientUnits=\"userSpaceOnUse\" x2=\"261.746\" y1=\"112.094\" y2=\"112.094\">\n                    <stop offset=\"0\" stopColor=\"#63be6b\"/>\n                    <stop offset=\".506\" stopColor=\"#5bbc6a\"/>\n                    <stop offset=\"1\" stopColor=\"#4ab96a\"/>\n                  </linearGradient>\n                  <linearGradient id=\"b\" gradientUnits=\"userSpaceOnUse\" x1=\".152\" x2=\"179.896\" y1=\"223.393\" y2=\"223.393\">\n                    <stop offset=\"0\" stopColor=\"#3ec6f2\"/>\n                    <stop offset=\"1\" stopColor=\"#45afe3\"/>\n                  </linearGradient>\n                  <linearGradient id=\"c\" gradientUnits=\"userSpaceOnUse\" x1=\"179.896\" x2=\"407.976\" y1=\"229.464\" y2=\"229.464\">\n                    <stop offset=\"0\" stopColor=\"#faa51a\"/>\n                    <stop offset=\".387\" stopColor=\"#fab716\"/>\n                    <stop offset=\".741\" stopColor=\"#fac412\"/>\n                    <stop offset=\"1\" stopColor=\"#fac80f\"/>\n                  </linearGradient>\n                  <linearGradient id=\"d\" gradientUnits=\"userSpaceOnUse\" x1=\"1.744\" x2=\"272.296\" y1=\"345.521\" y2=\"345.521\">\n                    <stop offset=\"0\" stopColor=\"#ec3b50\"/>\n                    <stop offset=\"1\" stopColor=\"#e7515b\"/>\n                  </linearGradient>\n                  <path d=\"M261.7 142.3L15 1.3C11.9-.5 8-.4 5 1.4c-3.1 1.8-5 5-5 8.6 0 0 .1 13 .2 34.4l179.7 179.7z\" fill=\"url(#a)\"/>\n                  <path d=\"M.2 44.4C.5 121.6 1.4 309 1.8 402.3L180 224.1z\" fill=\"url(#b)\"/>\n                  <path d=\"M402.9 223l-141.2-80.7-81.9 81.8 92.4 92.4L403 240.3c3.1-1.8 5-5.1 5-8.6 0-3.6-2-6.9-5.1-8.7z\" fill=\"url(#c)\"/>\n                  <path d=\"M1.7 402.3c.2 33.3.3 54.6.3 54.6 0 3.6 1.9 6.9 5 8.6 3.1 1.8 6.9 1.8 10 0l255.3-148.9-92.4-92.4z\" fill=\"url(#d)\"/>\n                </svg>);\n      default:\n        return null;\n    }\n  }\n  const keys = {\n   \"amazon\": {\n     \"base\":\"https://www.amazon.com/s/ref=nb_ss_d?url=search-alias%3Ddvd&field-keywords=\",\n     \"name\":\"Amazon\"\n   },\n   \"netflix\": {\n     \"base\":\"https://www.netflix.com/Search?lnkctr=srchrd-ips&v1=\",\n     \"name\":\"Netflix\"\n   },\n   \"googleplay\": {\n     \"base\":\"https://play.google.com/store/search?c=movies&q=\",\n     \"name\":\"Google Play\"\n   }\n  }\n  return Object.keys(keys).map(e => {\n    return (\n      <a className={ e } key={ e } href={ keys[e].base+title } target=\"_blank\" rel=\"noopener noreferrer\" title={ \"Search for \" + title + \" on \" + keys[e].name }>\n        { getLogo(e) } { keys[e].name }\n      </a>\n    )\n  })\n}\n\nexport default CommercialLinks\n","import React from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nfunction BackButton(props) {\n  const { icon, title, href } = props;\n  const history = useHistory();\n  const location = useLocation();\n  const handleClick = (e) => {\n    e.preventDefault();\n    if ((href === true)\n    || ((location.pathname.slice(0,8) === \"/person/\") && (typeof location.state === \"undefined\"))\n    || (location.state?.from === \"/\")) {\n      history.push(\"/grid/\");\n    } else {\n      history.goBack();\n    }\n  };\n  return (<a onClick={ handleClick } title={ title } className=\"btn-icon fixed top-2 left-2\" href=\"/grid/\">\n      { (icon === \"arrow\")\n        ? <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fillRule=\"evenodd\" d=\"M10.78 19.03a.75.75 0 01-1.06 0l-6.25-6.25a.75.75 0 010-1.06l6.25-6.25a.75.75 0 111.06 1.06L5.81 11.5h14.44a.75.75 0 010 1.5H5.81l4.97 4.97a.75.75 0 010 1.06z\"></path></svg>\n        : <svg width=\"24px\" height=\"24px\" xmlns=\"http://www.w3.org/2000/svg\">\n            <defs>\n              <svg id=\"square\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fillRule=\"evenodd\" d=\"M4 5.75C4 4.784 4.784 4 5.75 4h4.5c.966 0 1.75.784 1.75 1.75v4.5A1.75 1.75 0 0110.25 12h-4.5A1.75 1.75 0 014 10.25v-4.5zm1.75-.25a.25.25 0 00-.25.25v4.5c0 .138.112.25.25.25h4.5a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-4.5z\"></path></svg>\n            </defs>\n            <use transform=\"translate(-0.5 -1)\" href=\"#square\"></use>\n            <use transform=\"translate(9 -1)\" href=\"#square\"></use>\n            <use transform=\"translate(-0.5 8.5)\" href=\"#square\"></use>\n            <use transform=\"translate(9 8.5)\" href=\"#square\"></use>\n          </svg> }\n    </a>);\n}\n\nexport default BackButton;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction DispatchLink(props) {\n  const { href, title, action, classes, children } = props;\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const handleClick = (e) => {\n    e.preventDefault();\n    dispatch(action);\n    history.push(href)\n  };\n  return (\n    <a\n      className={ classes }\n      href={ href }\n      title={ title }\n      onClick={ handleClick }>\n      { children }\n    </a>\n  )\n}\n\nexport default DispatchLink;\n","import React from \"react\";\n\nimport DispatchLink from \"../../dispatch-link.js\";\n\nfunction GenresLinks(props) {\n  const { genres } = props;\n  return (\n    <li className=\"col-span-2\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n        <path d=\"M7.75 6.5a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z\"></path>\n        <path fillRule=\"evenodd\" d=\"M2.5 1A1.5 1.5 0 001 2.5v8.44c0 .397.158.779.44 1.06l10.25 10.25a1.5 1.5 0 002.12 0l8.44-8.44a1.5 1.5 0 000-2.12L12 1.44A1.5 1.5 0 0010.94 1H2.5zm0 1.5h8.44l10.25 10.25-8.44 8.44L2.5 10.94V2.5z\"></path>\n      </svg>\n      <ul>\n        { genres.map(e => (\n          <li key={ e }>\n            <DispatchLink\n              href=\"/grid/\"\n              title={ \"Browse movies with the genre \"+e }\n              action={ { type: \"filters/genres/add\", payload: e.toLowerCase(), reset: true } }>\n              {e}\n            </DispatchLink>\n          </li>\n        )) }\n      </ul>\n    </li>\n  )\n}\n\nexport default GenresLinks;\n","import React from \"react\";\n\nimport { Link } from \"react-router-dom\";\n\nfunction PersonLinks(props) {\n  const { persons, type } = props;\n  const filter = (type === \"director\") ? type : \"star\";\n  return (\n    <li className=\"col-span-2\">\n      { (type === \"director\")\n      ? <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n          <path fillRule=\"evenodd\" d=\"M24 5.25a.75.75 0 00-1.136-.643L16.5 8.425V6.25a1.75 1.75 0 00-1.75-1.75h-13A1.75 1.75 0 000 6.25v11C0 18.216.784 19 1.75 19h13a1.75 1.75 0 001.75-1.75v-2.175l6.364 3.818A.75.75 0 0024 18.25v-13zm-7.5 8.075l6 3.6V6.575l-6 3.6v3.15zM15 9.75v-3.5a.25.25 0 00-.25-.25h-13a.25.25 0 00-.25.25v11c0 .138.112.25.25.25h13a.25.25 0 00.25-.25v-7.5z\"></path>\n        </svg>\n      : <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n          <path fillRule=\"evenodd\" d=\"M3.5 8a5.5 5.5 0 118.596 4.547 9.005 9.005 0 015.9 8.18.75.75 0 01-1.5.045 7.5 7.5 0 00-14.993 0 .75.75 0 01-1.499-.044 9.005 9.005 0 015.9-8.181A5.494 5.494 0 013.5 8zM9 4a4 4 0 100 8 4 4 0 000-8z\"></path>\n          <path d=\"M17.29 8c-.148 0-.292.01-.434.03a.75.75 0 11-.212-1.484 4.53 4.53 0 013.38 8.097 6.69 6.69 0 013.956 6.107.75.75 0 01-1.5 0 5.193 5.193 0 00-3.696-4.972l-.534-.16v-1.676l.41-.209A3.03 3.03 0 0017.29 8z\"></path>\n        </svg> }\n      <ul>\n        { persons.filter(e => e.role === filter).map(e => (\n          <li key={ e.id }>\n            <Link\n              to={ {pathname: \"/person/\"+e.id, state: {from: \"person-links\" } } }\n              title={ \"View more about this \"+ type +\": \"+e.name }>\n              {e.name}\n            </Link>\n          </li>\n        )) }\n      </ul>\n    </li>  \n  )\n}\n\nexport default PersonLinks;\n","import React from \"react\";\n\nimport GenresLinks from \"./genres-links.js\";\nimport PersonLinks from \"./person-links.js\";\n\nfunction MovieDetails(props) {\n  const { rating, duration, genres, persons } = props;\n  return (\n    <ul className=\"details-list\">\n      <li className=\"col-start-1\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n          <path fillRule=\"evenodd\" d=\"M4.75 2a.75.75 0 000 1.5h.75v2.982a4.75 4.75 0 002.215 4.017l2.044 1.29a.25.25 0 010 .422l-2.044 1.29A4.75 4.75 0 005.5 17.518V20.5h-.75a.75.75 0 000 1.5h14.5a.75.75 0 000-1.5h-.75v-2.982a4.75 4.75 0 00-2.215-4.017l-2.044-1.29a.25.25 0 010-.422l2.044-1.29A4.75 4.75 0 0018.5 6.482V3.5h.75a.75.75 0 000-1.5H4.75zM17 3.5H7v2.982A3.25 3.25 0 008.516 9.23l2.044 1.29a1.75 1.75 0 010 2.96l-2.044 1.29A3.25 3.25 0 007 17.518V20.5h10v-2.982a3.25 3.25 0 00-1.516-2.748l-2.044-1.29a1.75 1.75 0 010-2.96l2.044-1.29A3.25 3.25 0 0017 6.482V3.5z\"></path>\n        </svg>\n        { duration }\n      </li>\n      <li className=\"col-start-2\">\n        <svg className=\"rating-star\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n          <mask id=\"rating\">\n            <rect x=\"0\" y=\"0\" fill=\"white\" stroke=\"none\" height=\"24\" width={ 24*rating/10 }></rect>\n          </mask>\n          <path  mask=\"url(#rating)\" fillRule=\"evenodd\" d=\"M12.672.668a.75.75 0 00-1.345 0L8.27 6.865l-6.838.994a.75.75 0 00-.416 1.279l4.948 4.823-1.168 6.811a.75.75 0 001.088.791L12 18.347l6.117 3.216a.75.75 0 001.088-.79l-1.168-6.812 4.948-4.823a.75.75 0 00-.416-1.28l-6.838-.993L12.672.668z\"></path>\n          <path fillRule=\"evenodd\" d=\"M12 .25a.75.75 0 01.673.418l3.058 6.197 6.839.994a.75.75 0 01.415 1.279l-4.948 4.823 1.168 6.811a.75.75 0 01-1.088.791L12 18.347l-6.117 3.216a.75.75 0 01-1.088-.79l1.168-6.812-4.948-4.823a.75.75 0 01.416-1.28l6.838-.993L11.328.668A.75.75 0 0112 .25zm0 2.445L9.44 7.882a.75.75 0 01-.565.41l-5.725.832 4.143 4.038a.75.75 0 01.215.664l-.978 5.702 5.121-2.692a.75.75 0 01.698 0l5.12 2.692-.977-5.702a.75.75 0 01.215-.664l4.143-4.038-5.725-.831a.75.75 0 01-.565-.41L12 2.694z\"></path>\n        </svg>\n        { rating }\n      </li>\n      <GenresLinks genres={ genres } />\n      <PersonLinks persons={ persons } type=\"director\"/>\n      <PersonLinks persons={ persons } type=\"actor\"/>\n    </ul>)\n}\n\nexport default MovieDetails;\n","import React from \"react\";\n\nimport { Link } from \"react-router-dom\";\n\nfunction IncompletePersons(props) {\n  const { persons } = props;\n  return (\n    <ul className=\"details-list\">\n      <li className=\"col-span-2\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n          <path fillRule=\"evenodd\" d=\"M3.5 8a5.5 5.5 0 118.596 4.547 9.005 9.005 0 015.9 8.18.75.75 0 01-1.5.045 7.5 7.5 0 00-14.993 0 .75.75 0 01-1.499-.044 9.005 9.005 0 015.9-8.181A5.494 5.494 0 013.5 8zM9 4a4 4 0 100 8 4 4 0 000-8z\"></path>\n          <path d=\"M17.29 8c-.148 0-.292.01-.434.03a.75.75 0 11-.212-1.484 4.53 4.53 0 013.38 8.097 6.69 6.69 0 013.956 6.107.75.75 0 01-1.5 0 5.193 5.193 0 00-3.696-4.972l-.534-.16v-1.676l.41-.209A3.03 3.03 0 0017.29 8z\"></path>\n        </svg>\n        <ul>\n          { persons.map(e => (\n            <li key={ e.name } >\n              <Link\n                to={ {pathname: \"/person/\"+e.name, state: {from: \"person-links\" } } }\n                title={ \"View more about \"+e.name }>\n                {e.name}\n              </Link>\n            </li>\n          )) }\n        </ul>\n      </li>\n    </ul>\n  )\n}\n\nexport default IncompletePersons;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport MoviePoster from \"../components/movie-poster.js\";\nimport TrailerOverlay from \"../components/item-view/trailer.js\";\nimport EnrichedLinks from \"../components/item-view/enriched-links.js\";\nimport CommercialLinks from \"../components/item-view/commercial-links.js\";\nimport BackButton from \"../components/item-view/back-button.js\";\nimport MovieDetails from \"../components/item-view/movie-details/movie-details.js\";\nimport IncompletePersons from \"../components/item-view/movie-details/incomplete-persons.js\";\n\nimport \"./item-view.css\";\n\nfunction MovieView() {\n  let { id } = useParams();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const moviesArray = useSelector(state => state.movies.results);\n  const movieSelector = useSelector(state => state.movies.results.find(e => e.id === id));\n  const queryBody = useSelector(state => state.movies.body);\n  const [context, setContext] = useState(true);\n  const [trailer, setTrailer] = useState(false);\n  const [trailerState, setTrailerState] = useState(\"unset\");\n  const [enrichedState, setEnrichedState] = useState(\"unset\");\n  const [nextPageLoading, setnextPageLoading] = useState(false);\n  const [movie, setMovie] = useState({});\n  const [movieIndex, setMovieIndex] = useState(0);\n  const section = useRef(null);\n\n  const handleKeys = (e) => {\n    switch (e.key) {\n      case \"ArrowLeft\":\n        e.preventDefault();\n        previousMovie();\n        break;\n      case \"ArrowRight\":\n        e.preventDefault();\n        nextMovie();\n        break;\n      case \" \":\n        e.preventDefault();\n        setTrailer(state => true);\n        break;\n      default:\n        return null;\n    }\n  }\n\n  const fetchMovies = async (body) => {\n    let results = await fetch(\"/imdb/movies\", {\n      method: \"POST\",\n      body: JSON.stringify(body)\n    });\n    results = await results.json();\n    return results;\n  }\n\n  const nextPage = async () => {\n    if (!context) {\n      return null;\n    }\n    if (nextPageLoading) {\n      return null;\n    }\n    let start = moviesArray.length+1;\n    if (queryBody.start === start) {\n      return null;\n    }\n    queryBody.start = start;\n    setnextPageLoading(state => true);\n    let nextMovies = await fetchMovies(queryBody);\n    dispatch({ type: \"movies/setBody\", payload: queryBody });\n    dispatch({ type: \"movies/nextPage\", payload: nextMovies });\n    setnextPageLoading(state => false);\n    if (nextMovies.length > 0) {\n      return nextMovies[0].id;\n    }\n    return false;\n  }\n\n  const previousMovie = (e) => {\n    if (!context) {\n      return null;\n    }\n    if (e) {\n      e.preventDefault();\n    }\n    let target = moviesArray[movieIndex-1];\n    if (typeof target === \"undefined\") {\n      target = moviesArray[moviesArray.length-1];\n    }\n    history.replace(\"/grid/\");\n    history.push(\"/movie/\"+target.id);\n  }\n  \n  const nextMovie = async (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    let targetId = moviesArray[movieIndex+1];\n    if (typeof targetId === \"undefined\") {\n      targetId = await nextPage();\n      if (targetId === false) {\n        targetId = 0;\n      } else if (targetId === null) {\n        return;\n      }\n    } else {\n      targetId = targetId.id;\n    }\n    history.replace(\"/grid/\");\n    history.push(\"/movie/\"+targetId);\n  }\n\n  useEffect(() => { //gives focus to enable keyboard navigation whenever component is updated\n    if (!trailer) {\n      section.current.focus();\n    }\n  });\n\n  useEffect(() => {\n    if (movie.enriched || enrichedState !== \"unset\" || typeof movie.title === \"undefined\") {\n      return null;\n    }\n    (async () => {\n      setEnrichedState(state => \"loading\");\n      let enrichedData = await fetch(\"/imdb/enrich/\"+movie.id);\n      enrichedData = await enrichedData.json();\n      if (!enrichedData.error) {\n        movie.enriched = enrichedData;\n        if (!movie.incomplete) {\n          dispatch( {\n            type: \"movies/update\",\n            payload: { \n              id: movie.id,\n              property: \"enriched\",\n              value: enrichedData\n            }\n          });\n        }\n        setEnrichedState(state => \"ready\");\n        setMovie(state => ({...movie}));\n      } else {\n        setEnrichedState(state => \"error\");\n      }\n    })();\n  },[movie,dispatch,enrichedState]);\n\n  useEffect(() => {\n    if (movie.trailer || trailerState !== \"unset\" || typeof movie.title === \"undefined\") {\n      return null;\n    }\n    (async () => {\n      setTrailerState(state => \"loading\");\n      let trailer = await fetch(\"/imdb/trailer/\"+movie.title+\"/\"+movie.year+\"/\"+movie.id);\n      trailer = await trailer.json();\n      if (!trailer.error) {\n        movie.trailer = trailer;\n        if (!movie.incomplete) {\n          dispatch( {\n            type: \"movies/update\",\n            payload: { \n              id: movie.id,\n              property: \"trailer\",\n              value: trailer\n            }\n          });\n        }\n        setTrailerState(state => \"ready\");\n        setMovie(state => ({...movie}));\n      } else {\n        setTrailerState(state => \"error\");\n      }\n    })();\n  },[movie,dispatch,trailerState]);\n\n  useEffect(() => { //updates doc title\n    if ((document.title !== \"Movie Picker | \"+movie.title) && (typeof movie.title !== \"undefined\")) {\n      document.title = \"Movie Picker | \"+movie.title;\n    }\n  },[movie]);\n\n  useEffect(() => { //initializes component with movie data\n    if (id === \"random\") {\n      (async () => {\n        let movie = await fetch(\"/imdb/randomMovie\");\n        movie = await movie.json();\n        setMovie(state => movie[0]);\n        setContext(state => false);\n      })();\n    } else {\n      if (typeof movieSelector === \"undefined\") {\n        (async () => {\n          let fetchedMovie = await fetch(\"/imdb/movie/id/\"+id);\n          fetchedMovie = await fetchedMovie.json();\n          if (fetchedMovie.error) {\n            //REDIRECT TO 404\n            history.push(\"/404\");\n          }\n          fetchedMovie.incomplete = true;\n          setMovie(state => fetchedMovie);\n        })();\n      } else {\n        setMovie(state => ({...movieSelector}));\n        setMovieIndex(state => (moviesArray.findIndex(e => e.id === id)));\n      }\n    }\n  },[id,movieSelector,moviesArray,history]);\n\n  useEffect(() => { //restore error status when id changes\n    setEnrichedState(state => \"unset\");\n    setTrailerState(state => \"unset\");\n    window.scrollTo(0, 0);\n  },[id]);\n\n  return (\n    (Object.keys(movie).length === 0)\n      ? <section ref={ section } >\n          <BackButton title=\"Go back to grid view\" />\n        </section>\n      : <section onKeyDown={ handleKeys } ref={ section } tabIndex=\"1\" className=\"item-view\">\n        <BackButton title=\"Go back to grid view\" href={ movie.incomplete } />\n        <header>\n          <h1>{ movie.title }</h1>\n          <h2>{ movie.year }</h2>\n        </header>\n        <article>\n          <figure>\n            <MoviePoster\n              classes=\"mx-auto\"\n              vw={ Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0) }\n              size=\"big\"\n              cover={ movie.cover }\n              title={ movie.title } />\n          </figure>\n          <p>{ (!movie.incomplete) && movie.abstract }</p>\n          {(!movie.incomplete)\n            ? <MovieDetails\n                rating={ movie.rating }\n                duration={ movie.duration }\n                genres={ movie.genres }\n                persons={ movie.roles }\n              />\n            : <IncompletePersons persons={ movie.roles } />\n          }\n          <section className=\"links\">\n            { (movie.trailer) && \n              <div className=\"w-full flex-grow flex justify-around mb-1\">\n                <button title=\"Play trailer\" onClick={ () => setTrailer(state => true) } className=\"w-2/3 inline-flex justify-center\">\n                  <svg className=\"fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fillRule=\"evenodd\" d=\"M1.75 4.5a.25.25 0 00-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 00.25-.25V4.75a.25.25 0 00-.25-.25H1.75zM0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0122.25 21H1.75A1.75 1.75 0 010 19.25V4.75z\"></path><path d=\"M9 15.584V8.416a.5.5 0 01.77-.42l5.576 3.583a.5.5 0 010 .842L9.77 16.005a.5.5 0 01-.77-.42z\"></path></svg>\n                  Play trailer\n                </button>\n              </div>\n            }\n            <EnrichedLinks enrichedData={movie.enriched} title={ movie.title } />\n            <CommercialLinks title={ movie.title } />\n          </section>\n        </article>\n        {(!movie.incomplete && context) &&\n        <a title=\"View previous movie\" onClick={ previousMovie } className=\"btn-icon fixed bottom-2 right-15\" href={ \"/movie/\"+movieIndex }>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fillRule=\"evenodd\" d=\"M10.78 19.03a.75.75 0 01-1.06 0l-6.25-6.25a.75.75 0 010-1.06l6.25-6.25a.75.75 0 111.06 1.06L5.81 11.5h14.44a.75.75 0 010 1.5H5.81l4.97 4.97a.75.75 0 010 1.06z\"></path></svg>\n        </a>}\n        {(!movie.incomplete && context) &&\n        <a title=\"View next movie\" onClick={ nextMovie } className=\"btn-icon fixed bottom-2 right-2\" href={ \"/movie/\"+movieIndex }>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fillRule=\"evenodd\" d=\"M13.22 19.03a.75.75 0 001.06 0l6.25-6.25a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 10-1.06 1.06l4.97 4.97H3.75a.75.75 0 000 1.5h14.44l-4.97 4.97a.75.75 0 000 1.06z\"></path></svg>\n        </a>}\n        <TrailerOverlay\n          classes={ (trailer) ? \"\":\"hidden \" }\n          trailer={ movie.trailer }\n          title={ movie.title }\n          handleChange={ () => setTrailer(state => false) }\n        />\n      </section>\n  )\n}\n\nexport default MovieView\n","import React, { useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nimport DispatchLink from \"../components/dispatch-link.js\";\nimport MoviePoster from \"../components/movie-poster.js\";\nimport BackButton from \"../components/item-view/back-button.js\";\nimport EnrichedLinks from \"../components/item-view/enriched-links.js\";\nimport CommercialLinks from \"../components/item-view/commercial-links.js\";\n\nimport \"./item-view.css\";\n\nfunction PersonView() {\n  let { id } = useParams();\n  const history = useHistory();\n  const [person, setPerson] = useState({});\n  const [readMore, setMore] = useState(false);\n\n  const handleReadMore = () => {\n    setMore(state => !state);\n  }\n  \n  const getShortText = (text,limit) => {\n    text = text.split(\" \");\n    const dot = text.findIndex((e,i) => e.includes(\".\") && i >= limit);\n    return text.slice(0,dot+1).join(\" \");\n  }\n\n  useEffect(() => {\n    if ((document.title !== \"Movie Picker | \"+person.name) && (typeof person.name !== \"undefined\")) {\n      document.title = \"Movie Picker | \"+person.name;\n    }\n    if ((!person.enriched) && (person.id)){\n      (async () => {\n        let enrichedData = await fetch(\"/imdb/enrich/\"+person.id);\n        enrichedData = await enrichedData.json();\n        if (!enrichedData.error) {\n          person.enriched = enrichedData;\n          setPerson(state => ({...person}));\n        }\n      })();\n    }\n  },[person]);\n\n  useEffect(() => {\n    setMore(state => false);\n    (async () => {\n      let person = await fetch(\"/imdb/person/\"+id);\n      person = await person.json();\n      if (person.error) {\n        //REDIRECT TO 404\n        history.push(\"/404\");\n      }\n      setPerson(state => ({...person}));\n    })();\n    window.scrollTo(0, 0);\n  },[id,history]);\n\n  return (\n    (Object.keys(person).length === 0)\n      ? <section>\n          <BackButton title=\"Go back to movie view\" icon=\"arrow\" />\n        </section>\n      : <section className=\"item-view person\">\n        <BackButton title=\"Go back to movie view\" icon=\"arrow\" />\n        <header>\n          <h1>{ person.name }</h1>\n        </header>\n        <article className=\"mt-9\">\n          <figure>\n            <MoviePoster\n              classes=\"mx-auto\"\n              vw={ Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0) }\n              size=\"big\"\n              type=\"person\"\n              cover={ person.picture }\n              title={ person.name } />\n          </figure>\n          <p>{ (readMore) ? person.bio : getShortText(person.bio,100) }\n          <button className=\"ml-auto rounded-lg border-2 border-solid bg-black m-2 block text-center border-yellow-50 hover:bg-yellow-50 hover:text-black active:bg-red-700 active:border-red-900 active:text-red-50 px-3 py-2\" onClick= { handleReadMore }>\n            Read { (readMore) ? \"less\":\"more\" }\n          </button>\n          </p>\n          <section className=\"links\">\n            <div className=\"w-full flex-grow flex justify-around mb-1\">\n              <DispatchLink\n                href=\"/grid/\"\n                title={ \"Browse filmography: \"+person.name }\n                action={ { type: \"filters/persons/p0\", payload: {id: person.id, name: person.name}, reset: true } }>\n                <svg className=\"fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                  <path fillRule=\"evenodd\" d=\"M24 5.25a.75.75 0 00-1.136-.643L16.5 8.425V6.25a1.75 1.75 0 00-1.75-1.75h-13A1.75 1.75 0 000 6.25v11C0 18.216.784 19 1.75 19h13a1.75 1.75 0 001.75-1.75v-2.175l6.364 3.818A.75.75 0 0024 18.25v-13zm-7.5 8.075l6 3.6V6.575l-6 3.6v3.15zM15 9.75v-3.5a.25.25 0 00-.25-.25h-13a.25.25 0 00-.25.25v11c0 .138.112.25.25.25h13a.25.25 0 00.25-.25v-7.5z\"></path>\n                </svg>\n                Filmography\n              </DispatchLink>\n            </div>\n            <EnrichedLinks enrichedData={ person.enriched } title={ person.name } />\n            <CommercialLinks title={ person.name } />\n          </section>\n        </article>\n      </section>\n  )\n}\n\nexport default PersonView\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\n\nfunction Error404() {\n  const dispatch = useDispatch();\n  const section = useRef(null);\n  const [covers, setCovers] = useState([]);\n  const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n  \n  const showCovers = () => {\n    try {\n      const height = section.current.getBoundingClientRect().height;\n      let l = -100;\n      let t = -160;\n      let posters = [];\n      for (let e of covers) {\n        const left = l+Math.random()*150;\n        const top = t+Math.random()*220;\n        posters.push({\n          id: e.id,\n          cover: e.cover.medium,\n          title: e.title,\n          style: {\n            position: \"absolute\",\n            left: left+\"px\",\n            top: top+\"px\",\n            \"--angle\": Math.round(Math.random()*90)-45+\"deg\"\n          }\n        });\n        l += 133\n        if (l > vw) {\n          t += 213;\n          l = -100;\n        }\n        if (t > height) {\n          t = -160;\n        }\n      }\n      return posters.map(e => {\n        return (<Link style={e.style} to={{pathname:\"/movie/\"+e.id, state:{from:\"/\"}}} title={ e.title }><img src={e.cover} alt={ \"poster for the movie '\"+ e.title +\"'\" } /></Link>);\n      });\n    } catch {\n      return null;\n    }\n  }\n  \n  useEffect(() => {\n    (async () => {\n      const body = {\n        count:75,\n        start:Math.round(Math.random()*820),\n        award:\"oscar_winner\"\n      }\n      let results = await fetch(\"/imdb/movies\", {\n        method: \"POST\",\n        body: JSON.stringify(body)\n      });\n      results = await results.json();\n      console.log(results);\n      dispatch({ type: \"movies/nextPage\", payload: results });\n      setCovers(state => results);\n    })();\n  },[dispatch]);\n  \n  return (<section ref={ section } className=\"err-404\">\n  <h1>404</h1>\n  <div id=\"covers\">{ showCovers() }</div>\n  </section>);\n}\n\nexport default Error404;\n","import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Footer from \"./components/footer.js\";\nimport HomeView from \"./views/home-view.js\";\nimport GridView from \"./views/grid-view.js\";\nimport MovieView from \"./views/movie-view.js\";\nimport PersonView from \"./views/person-view.js\";\nimport Error404 from \"./views/error-404.js\";\n\nfunction App() {\n  return (\n    <Router>\n        <Switch>\n          <Route path=\"/movie/:id\">\n            <MovieView />\n          </Route>\n          <Route path=\"/person/:id\">\n            <PersonView />\n          </Route>\n          <Route path=\"/404\">\n            <Error404 />\n          </Route>\n          <Route path=\"/:home?\">\n            <HomeView />\n            <GridView />\n          </Route>\n        </Switch>\n        <Footer />\n    </Router>\n  );\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\"\nimport \"./index.css\";\nimport store from \"./store.js\"\nimport App from \"./App\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}